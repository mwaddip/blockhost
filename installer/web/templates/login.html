{% extends "base.html" %}

{% block title %}Login - BlockHost Installer{% endblock %}

{% block content %}
<div style="max-width: 400px; margin: 4rem auto;">
    <div class="card text-center">
        <h1 style="margin-bottom: 0.5rem;">Welcome to BlockHost</h1>
        <p class="text-muted mb-2">Enter the access code displayed on the console</p>

        {% if error %}
        <div class="alert alert-error">{{ error }}</div>
        {% endif %}

        <form method="POST" action="{{ url_for('login') }}">
            <div class="form-group">
                <label for="otp">Access Code</label>
                <input type="text"
                       id="otp"
                       name="otp"
                       placeholder="XXXXXX"
                       autocomplete="off"
                       autofocus
                       style="text-align: center; font-size: 1.5rem; letter-spacing: 0.5rem; text-transform: uppercase;">
            </div>

            <button type="submit" class="btn btn-primary" style="width: 100%;">
                Authenticate
            </button>
        </form>

        {% if otp_status %}
        <div class="mt-2 text-muted" style="font-size: 0.75rem;">
            {% if otp_status.locked %}
            <span style="color: var(--error);">Access locked - too many attempts</span>
            {% elif otp_status.attempts > 0 %}
            {{ 10 - otp_status.attempts }} attempts remaining
            {% endif %}
        </div>
        {% endif %}
    </div>

    <div class="text-center text-muted" style="margin-top: 2rem;">
        <p style="font-size: 0.875rem;">
            The access code is displayed on the physical console (TTY1).<br>
            If you don't see a code, press Ctrl+C on the console to regenerate.
        </p>
    </div>
</div>
{% endblock %}
