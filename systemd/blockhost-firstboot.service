[Unit]
Description=BlockHost First-Boot Installer
After=network-online.target getty@tty1.service
Wants=network-online.target
Conflicts=getty@tty1.service
ConditionPathExists=!/var/lib/blockhost/.setup-complete

[Service]
Type=simple
ExecStart=/opt/blockhost/first-boot.sh
TimeoutStartSec=3600
StandardInput=tty
StandardOutput=tty
StandardError=tty
TTYPath=/dev/tty1
TTYReset=yes
TTYVHangup=yes

[Install]
WantedBy=multi-user.target
